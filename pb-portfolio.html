<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Portfolio Snapshot — Electric Ice</title>

<style>
:root{
  --bg0:#060813;
  --bg1:#071225;
  --panel:#0b1630cc;
  --stroke:#1a2f55;
  --text:#e8f2ff;
  --muted:#a9bedc;
  --ice:#76f3ff;
  --wave:#ff4fd8;
  --ok:#8affc1;
  --warn:#ffd17a;
  --bad:#ff6b86;
  --shadow:0 20px 60px rgba(0,0,0,.45);
  --radius:18px;
  --mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Courier New",monospace;
  --sans:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
}

html,body{height:100%}
body{
  margin:0;
  font-family:var(--sans);
  font-size:18px;
  color:var(--text);
  background:
    radial-gradient(1200px 600px at 10% 0%, rgba(118,243,255,.18), transparent 60%),
    radial-gradient(1000px 800px at 90% 10%, rgba(255,79,216,.12), transparent 60%),
    linear-gradient(180deg,var(--bg0),var(--bg1));
}

body:before{
  content:"";
  position:fixed; inset:0;
  background:
    linear-gradient(to bottom, rgba(255,255,255,.045) 1px, transparent 1px),
    linear-gradient(to right, rgba(255,255,255,.03) 1px, transparent 1px);
  background-size:56px 56px;
  opacity:.18;
  pointer-events:none;
}

a{color:var(--ice);text-decoration:none}
a:hover{text-decoration:underline}

.wrap{max-width:1180px;margin:22px auto 70px;padding:0 16px}

.top{display:flex;justify-content:space-between;align-items:center;margin-bottom:14px}
.brand h1{margin:0;font-size:20px;font-weight:800}
.brand .sub{font-size:13px;color:var(--muted);font-family:var(--mono)}

.btn{
  border:1px solid var(--stroke);
  background:linear-gradient(180deg,rgba(118,243,255,.12),rgba(118,243,255,.05));
  color:var(--text);
  padding:12px 14px;
  border-radius:14px;
  cursor:pointer;
  font-weight:700;
}
.btn:disabled{opacity:.6}

.panel{
  background:var(--panel);
  border:1px solid var(--stroke);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  backdrop-filter:blur(10px);
}

.kpis{
  padding:16px;
  display:grid;
  grid-template-columns:1.1fr .9fr .9fr;
  gap:12px;
}

.kpi{
  border:1px solid rgba(118,243,255,.14);
  border-radius:16px;
  padding:12px;
  background:linear-gradient(180deg,rgba(255,255,255,.05),rgba(255,255,255,.02));
}
.kpi .label{font-size:12px;color:var(--muted);font-family:var(--mono);font-weight:800}
.kpi .value{font-size:26px;font-weight:900}
.kpi .hint{font-size:12px;color:var(--muted);font-family:var(--mono)}

.ice{color:var(--ice)}
.wave{color:var(--wave)}

.tableWrap{margin-top:14px;padding:10px}
table{width:100%;border-collapse:collapse}
thead th{
  font-size:12px;
  color:var(--muted);
  font-family:var(--mono);
  text-align:left;
  padding:12px 10px;
  border-bottom:1px solid rgba(118,243,255,.14);
}
tbody td{
  padding:12px 10px;
  border-bottom:1px solid rgba(118,243,255,.08);
}
.right{text-align:right}
.mono{font-family:var(--mono)}

.badge{
  padding:4px 8px;
  border-radius:999px;
  font-size:12px;
  font-family:var(--mono);
  border:1px solid rgba(255,255,255,.12);
}
.b-ok{color:var(--ok)}
.b-warn{color:var(--warn)}
.b-bad{color:var(--bad)}
</style>
</head>

<body>
<div class="wrap">
  <div class="top">
    <div class="brand">
      <h1>Portfolio Snapshot — Electric Ice</h1>
      <div class="sub">Live valuation on refresh · Whole shares · Clean rebuild</div>
    </div>
    <button class="btn" id="refreshBtn">Refresh Prices</button>
  </div>

  <section class="panel kpis">
    <div class="kpi">
      <div class="label">TOTAL PORTFOLIO VALUE</div>
      <div class="value ice" id="totalValue">$—</div>
      <div class="hint" id="lastUpdated">—</div>
    </div>
    <div class="kpi">
      <div class="label">PRICED POSITIONS</div>
      <div class="value wave" id="pricedCount">—</div>
      <div class="hint">OTC tickers may return N/A</div>
    </div>
    <div class="kpi">
      <div class="label">DATA SOURCE</div>
      <div class="value">Stooq via r.jina.ai</div>
      <div class="hint mono">https CSV · no API key</div>
    </div>
  </section>

  <section class="panel tableWrap">
    <table>
      <thead>
        <tr>
          <th>Company</th>
          <th>Ticker</th>
          <th class="right">Shares</th>
          <th class="right">Price</th>
          <th class="right">Value</th>
        </tr>
      </thead>
      <tbody id="rows"></tbody>
    </table>
  </section>
</div>

<script>
const PORTFOLIO = [
  ["Xylem","XYL","NYSE",1,"https://www.xylem.com"],
  ["Waste Management","WM","NYSE",1,"https://www.wm.com"],
  ["CSX","CSX","NASDAQ",1,"https://www.csx.com"],
  ["Eaton","ETN","NYSE",5,"https://www.eaton.com"],
  ["Quanta Services","PWR","NYSE",2,"https://www.quantaservices.com"],
  ["Hubbell","HUBB","NYSE",1,"https://www.hubbell.com"],
  ["Johnson Controls","JCI","NYSE",1,"https://www.johnsoncontrols.com"],
  ["Trane Technologies","TT","NYSE",1,"https://www.tranetechnologies.com"],
  ["Carrier","CARR","NYSE",1,"https://www.carrier.com"],
  ["Daikin","DKILY","OTCMKTS",1,"https://www.daikin.com"],
  ["ABB","ABBNY","OTCMKTS",1,"https://global.abb"],
  ["Nextracker","NXT","NASDAQ",2,"https://www.nextracker.com"],
  ["Texas Instruments","TXN","NASDAQ",1,"https://www.ti.com"],
  ["Eli Lilly","LLY","NYSE",2,"https://www.lilly.com"],
  ["Intuitive Surgical","ISRG","NASDAQ",2,"https://www.intuitive.com"],
  ["Thermo Fisher","TMO","NYSE",1,"https://www.thermofisher.com"],
  ["Cavco","CVCO","NASDAQ",1,"https://www.cavco.com"],
  ["MP Materials","MP","NYSE",11,"https://mpmaterials.com"],
  ["Lynas","LYSCF","OTCMKTS",1,"https://lynasrareearths.com"],
  ["Rocket Lab","RKLB","NASDAQ",4,"https://www.rocketlabusa.com"],
  ["Planet Labs","PL","NYSE",11,"https://www.planet.com"],
  ["Spire Global","SPIR","NYSE",1,"https://spire.com"]
];

function stooqSymbol(t){return t.toLowerCase()+".us"}
async function price(t){
  const u=`https://r.jina.ai/https://stooq.com/q/l/?s=${stooqSymbol(t)}&f=sd2t2ohlcv&h&e=csv`;
  const r=await fetch(u); if(!r.ok) throw 0;
  const l=(await r.text()).split("\n").map(x=>x.trim()).filter(Boolean);
  const h=l.findIndex(x=>x.toLowerCase().startsWith("symbol,"));
  const c=l[h].split(",").findIndex(x=>x.toLowerCase()=="close");
  return Number(l[h+1].split(",")[c]);
}

async function refresh(){
  rows.innerHTML="";
  let total=0, priced=0;

  for(const [n,t,e,s,h] of PORTFOLIO){
    let p=NaN,v=NaN;
    try{p=await price(t);v=p*s;total+=v;priced++}catch{}
    rows.innerHTML+=`
      <tr>
        <td><a href="${h}" target="_blank">${n}</a></td>
        <td><a href="https://www.google.com/finance/quote/${t}:${e}" target="_blank">${t}</a></td>
        <td class="right mono">${s}</td>
        <td class="right mono">${isFinite(p)?p.toFixed(2):"N/A"}</td>
        <td class="right mono">${isFinite(v)?v.toFixed(2):"—"}</td>
      </tr>`;
  }

  totalValue.textContent="$"+total.toLocaleString(undefined,{minimumFractionDigits:2});
  pricedCount.textContent=`${priced} / ${PORTFOLIO.length}`;
  lastUpdated.textContent=new Date().toLocaleString();
}

refreshBtn.onclick=refresh;
refresh();
</script>
</body>
</html>
